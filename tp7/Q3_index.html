<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    

    <script>


        function verifyDOB(date){
            const today = new Date();
            const todayDate =  today.getDate();
            const todayMonth = today.getMonth()+1;
            const todayYear = today.getFullYear();
            let dateRegex = /^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$/i;            
            if (!(dateRegex.test(date))) {
                console.log('date pas au bon format');
                return false;
            }
            else{
                console.log('ici');
                console.log(today);
                console.log(date);

                const resultDate = todayDate - date.slice(0,2);
                const resultMonth = todayMonth - date.slice(3,5);
                const resultYear = todayYear - date.slice(6,10);
                console.log(resultDate);
                console.log(resultMonth);


            return new Promise((resolve,reject) => {
                if(resultYear <= 18 && resultMonth < 0 || resultDate < 0){
                    reject('Vous êtes mineur: accès refusé !');
                }else{
                    resolve('Vous êtes majeur: accès confirmé !');
                    return true;
                }
            })
            }            
        }

        //function calls
        let myPromise = verifyDOB('11/04/2004');
        myPromise.then((message) => {
            console.log(message);
        }).catch((message) => {
            console.log(message);
        });

    </script>
</body>
</html>